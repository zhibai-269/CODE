filepath="/disk1/wjunx/data/HCP900/"
% fiber=vtkSurfRead(filepath)
persons=["100206","103818","108121","112314","115825","120111","124422","129634","133625","137027","141119","146533","150019","153732","172433","175338","178748","100307","104012","108222","112516","116221","120212","124624","129937","133827","137128","141422","146634","150423","153833","172534","175439","178849","100408","104416","108323","112819","116524","120515","124826","130013","133928","137229","141826","146937","150524","154229","172938","175540","178950","100610","104820","108525","112920","116726","120717","125525","130316","134021","137633","142828","147030","150625","169343","173132","175742","101006","105014","108828","113215","117122","121416","126325","130417","134223","137936","143325","147737","150726","169444","173233","176037","101107","105115","109123","113619","117324","121618","126628","130619","134324","138231","143426","148032","150928","169747","173334","176239","101309","105216","109830","113821","117930","121921","127327","130821","134425","138534","144125","148133","151223","169949","173435","176441","101410","105620","110007","113922","118023","122317","127630","130922","134728","138837","144226","148335","151425","170631","173536","176542","101915","105923","110411","114217","118124","122620","127933","131217","134829","139233","144428","148436","151627","170934","173637","176744","102008","106016","110613","114318","118225","122822","128026","131419","135225","139637","144731","148840","151728","171330","173738","177241","102311","106319","111009","114419","118528","123117","128127","131722","135528","139839","144832","148941","151829","171431","173839","177342","102513","106521","111312","114621","118730","123420","128632","131823","135730","140117","145127","149236","152831","171532","173940","177645","102816","107018","111413","114823","118932","123521","128935","131924","135932","140319","145834","149337","153025","171633","174437","177746","103111","107321","111514","115017","119126","123824","129028","132017","136227","140420","146129","149539","153227","172029","174841","178142","103414","107422","111716","115219","119732","123925","129129","132118","136732","140824","146331","149741","153429","172130","175035","178243","103515","107725","112112","115320","119833","124220","129331","133019","136833","140925","146432","149842","153631","172332","175237","178647"]
% persons=["119732"]
for i= persons
    display(i)
    fibername=filepath+i+"/input_surface.vtk";
    surfacename=filepath+i+"/input_fiber.vtk"
    surface=vtkSurfRead(fibername);
    fiber=ReadFiber(surfacename,[]);
    save("/disk1/haiyang/fiber_surface_and_edge/"+i+"surface.mat","surface")
    save("/disk1/haiyang/fiber_surface_and_edge/"+i+"fiber.mat","fiber")
    begin_end_data=cal_fiber_end_face_new(surface,fiber.fiber);
    save("/disk1/haiyang/fiber_surface_and_edge/"+i+"begin_end_data.mat","begin_end_data")
    % edge_info=last_new_file(surface,begin_end_data)
    % save(i+"edge_info.mat","edge_info")
    % edge_key=keys(edge_info);
     %save("/disk1/haiyang/matFile/"+i+"keys.mat","edge_key")
end